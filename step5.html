<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<style>
    body {
        margin: 0;
        font-family: "Inter", sans-serif;
        background: #f7f7f7;
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* ---------- TOP BAR ---------- */
    .topbar {
        width: 100%;
        background: white;
        height: 90px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 40px;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 50;
    }

    .topbar-left {
        display: flex;
        align-items: center;
        gap: 14px;
        width: 250px;
    }
    .topbar-left img { height: 55px; }

    .brand-text {
        font-weight: 700;
        font-size: 18px;
        line-height: 1.2;
    }
    .brand-tagline {
        font-size: 14px;
        opacity: 0.7;
font-weight: 500;
    }

    .topbar-center {
        flex: 1;
        text-align: center;
        font-size: 28px;
        font-weight: 800;
    }

    .topbar-right { width: 250px; }

    /* ---------- MAIN CONTENT ---------- */
    .scroll-area {
        flex: 1;
        overflow-y: auto;
        padding: 130px 0 140px;
        display: flex;
        justify-content: center;
    }

    .content-card {
        width: 900px;
        background: white;
        padding: 50px 70px 80px;
        border-radius: 22px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        min-height: 500px;
        text-align: center;
    }

    h2 {
        margin-top: 0;
        font-size: 28px;
        font-weight: 800;
        margin-bottom: 35px;
    }

    .zip-input {
        width: 260px;
        height: 58px;
        font-size: 24px;
        padding: 8px 16px;
        border-radius: 12px;
        border: 2px solid #ccc;
        outline: none;
        text-align: center;
    }
    .zip-input:focus {
        border-color: #4A5F3A;
    }

    .zip-note {
        margin-top: 12px;
        font-size: 15px;
        opacity: 0.7;
    }

    /* ---------- BOTTOM BAR ---------- */
    .bottombar {
        width: 100%;
        height: 110px;
        background: white;
        box-shadow: 0 -2px 12px rgba(0,0,0,0.08);
        position: fixed;
        bottom: 0;
        left: 0;
        padding: 10px 40px 0;
    }

    .bottom-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 50px;
    }

    .bottom-btn {
        padding: 12px 26px;
        background: #111;
        color: white;
        border-radius: 14px;
        font-size: 20px;
        font-weight: 600;
        cursor: pointer;
    }
    .bottom-btn.disabled {
        opacity: 0.3;
        pointer-events: none;
    }
    #nextBtn { margin-right: 120px; }

    .bottom-price {
        font-size: 26px;
        font-weight: 700;
    }

    .progressbar {
        width: 100%;
        height: 6px;
        background: #e5e5e5;
        margin-top: 10px;
        border-radius: 4px;
        overflow: hidden;
    }

    .progressbar-fill {
        height: 100%;
        width: 80%;
        background: #4A5F3A;
    }

</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
    <div class="topbar-left">
        <img src="img/LOGO.png">
        <div class="brand-text">
            Accent Wall Calculator<br>
            <span class="brand-tagline">Modern Design • Professional Installation</span>
        </div>
    </div>

    <div class="topbar-center">ENTER YOUR ZIP CODE</div>

    <div class="topbar-right"></div>
</div>

<!-- MAIN -->
<div class="scroll-area">
<div class="content-card">

    <h2>Enter Your ZIP</h2>

    <input id="zipInput" maxlength="5" class="zip-input" placeholder="78613">

    <div class="zip-note">Enter a valid 5-digit ZIP code</div>

</div>
</div>

<!-- BOTTOM BAR -->
<div class="bottombar">
    <div class="bottom-row">
        <div class="bottom-btn" onclick="goBack()">Back</div>
        <div id="priceBox" class="bottom-price">$0.00</div>
        <div id="nextBtn" class="bottom-btn disabled">Continue</div>
    </div>

    <div class="progressbar"><div class="progressbar-fill"></div></div>
</div>


<script>
/* -------- GET PARAMS -------- */
const params = new URLSearchParams(window.location.search);

const design = params.get("design");
const variant = params.get("variant");
const prep = params.get("prep");
const paintMode = params.get("paint_mode");
const area = parseFloat(params.get("area") || 0);
const basePrice = parseFloat(params.get("price") || 0);
const colorPrimary = params.get("color_primary");
const colorSecondary = params.get("color_secondary");

document.getElementById("priceBox").textContent = "$" + basePrice.toFixed(2);

/* ZIP pricing logic (оставил как ты просил) */
function calculateZipAdjustment(zip) {
    if (!zip || zip.length !== 5) return basePrice;

    const prefix = zip.substring(0, 2);

    if (prefix === "78" || prefix === "79") return basePrice + 50;
    if (prefix === "75" || prefix === "76") return basePrice + 120;

    return basePrice;
}

/* Input handler */
document.getElementById("zipInput").addEventListener("input", () => {
    const zip = document.getElementById("zipInput").value;

    if (zip.length === 5 && /^\d+$/.test(zip)) {
        document.getElementById("nextBtn").classList.remove("disabled");

        const newPrice = calculateZipAdjustment(zip);
        document.getElementById("priceBox").textContent = "$" + newPrice.toFixed(2);
    } else {
        document.getElementById("nextBtn").classList.add("disabled");
        document.getElementById("priceBox").textContent = "$" + basePrice.toFixed(2);
    }
});

/* Go back */
function goBack() {
    history.back();
}

/* Continue */
document.getElementById("nextBtn").onclick = () => {
    if (document.getElementById("nextBtn").classList.contains("disabled")) return;

    const zip = document.getElementById("zipInput").value;
    const newPrice = calculateZipAdjustment(zip);

    window.location.href =
        `step6.html?design=${design}` +
        `&variant=${variant}` +
        `&prep=${prep}` +
        `&paint_mode=${paintMode}` +
        `&color_primary=${colorPrimary}` +
        `&color_secondary=${colorSecondary}` +
        `&zip=${zip}` +
        `&area=${area}` +
        `&price=${newPrice}`;
};
</script>

</body>
</html>
