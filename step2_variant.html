<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<style>
    body {
        margin: 0;
        font-family: "Inter", sans-serif;
        background: #f7f7f7;
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* ---------- TOP BAR ---------- */
    .topbar {
        width: 100%;
        background: white;
        height: 90px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 40px;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 50;
    }

    .topbar-left {
        display: flex;
        align-items: center;
        gap: 14px;
        width: 250px;
    }

    .topbar-left img { height: 55px; }

    .brand-text {
        font-weight: 700;
        font-size: 18px;
        line-height: 1.2;
    }

    .brand-tagline {
        font-size: 14px;
        opacity: 0.7;
        font-weight: 500;
    }

    .topbar-center {
        flex: 1;
        text-align: center;
        font-size: 28px;
        font-weight: 800;
    }

    .topbar-right { width: 250px; }

    /* ----------- MAIN CONTENT ----------- */
    .scroll-area {
        flex: 1;
        overflow-y: auto;
        padding: 130px 0 140px;
        display: flex;
        justify-content: center;
    }

   .content-card {
    width: 1100px;
    background: white;
    padding: 40px 60px 80px;
    border-radius: 22px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    margin-bottom: 40px;
    min-height: 2500px; /* чтобы влезали 3 ряда плиток */
}

    /* ----- GRID (2 in row) ------ */
    .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 28px;
        margin-top: 20px;
    }

    .tile {
        border: 2px solid #ddd;
        border-radius: 16px;
        padding: 16px;
        cursor: pointer;
        transition: 0.2s;
        text-align: center;
        background: #fafafa;
    }

    .tile:hover {
        border-color: #333;
        transform: translateY(-3px);
    }

    .tile.selected {
        border-color: #4A5F3A;
        box-shadow: 0 0 10px rgba(0,0,0,0.15);
    }

    .tile img {
    width: 100%;
    height: 420px;   /* ≈ +50% визуально */
    object-fit: cover;
    border-radius: 14px;
    margin-bottom: 14px;
}


    .tile-title {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 6px;
    }
.design-title {
    text-align: center;
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 10px;
}

.design-subtitle {
    text-align: center;
    font-size: 15px;
    opacity: 0.75;
    margin-bottom: 25px;
}

    .tip-icon {
        font-size: 20px;
        width: 26px;
        height: 26px;
        border-radius: 50%;
        background: #eee;
        border: 1px solid #ccc;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    /* ---- FULLSCREEN CENTERED TOOLTIP ---- */
/* ---- FULLSCREEN CENTERED TOOLTIP ---- */
/* ---- FULLSCREEN CENTERED TEXT TOOLTIP ---- */
.tooltip-bubble {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

    width: 380px;
    max-width: 90vw;

    background: white;
    padding: 22px;
    border-radius: 14px;
    border: 1px solid #ddd;
    box-shadow: 0 8px 25px rgba(0,0,0,0.20);

    z-index: 9999;

    display: none;
    opacity: 0;
    transition: opacity 0.25s ease;

    font-size: 18px;
    line-height: 1.35;
    font-weight: 500;
}

.tooltip-bubble.show {
    display: block;
    opacity: 1;
}

/* затемнение фона */
.tooltip-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.35);
    display: none;
    z-index: 9998;
}


    /* ---------- BOTTOM BAR ---------- */
    .bottombar {
        width: 100%;
        height: 110px;
        background: white;
        box-shadow: 0 -2px 12px rgba(0,0,0,0.08);
        position: fixed;
        bottom: 0;
        left: 0;
        z-index: 50;
        padding: 10px 40px 0;
    }

    .bottom-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 50px;
    }

    .bottom-btn {
        padding: 12px 26px;
        background: #111;
        color: white;
        border-radius: 14px;
        font-size: 20px;
        font-weight: 600;
        cursor: pointer;
    }

    .bottom-btn.disabled {
        opacity: 0.3;
        pointer-events: none;
    }
#nextBtn {
    margin-right: 120px;
}
    .bottom-price {
        font-size: 22px;
        font-weight: 700;
    }

    .progressbar {
        width: 100%;
        height: 6px;
        background: #e5e5e5;
        border-radius: 4px;
        margin-top: 10px;
        overflow: hidden;
    }

    .progressbar-fill {
        height: 100%;
        width: 30%;
        background: #4A5F3A;
    }

</style>



<body>

<!-- TOPBAR -->
<div class="topbar">
    <div class="topbar-left">
        <img src="img/LOGO.png">
        <div class="brand-text">
            Accent Wall Calculator<br>
            <span class="brand-tagline">Modern Design • Professional Installation</span>
        </div>
    </div>

    <div class="topbar-center">CHOOSE DESIGN VARIANT</div>

    <div class="topbar-right"></div>
</div>


<!-- MAIN CONTENT -->
<div class="scroll-area">
<div class="content-card">

<div id="designTitle" class="design-title"></div>

    <div id="variantGrid" class="grid"></div>

</div>
</div>


<!-- BOTTOM BAR -->
<div class="bottombar">
    <div class="bottom-row">
        <div id="backBtn" class="bottom-btn" onclick="history.back()">Back</div>

        <div id="bottomPrice" class="bottom-price">$0</div>

        <div id="nextBtn" class="bottom-btn disabled" onclick="goNext()">Continue</div>
    </div>

    <div class="progressbar">
        <div class="progressbar-fill"></div>
    </div>
</div>



<script>

const designTitles = {
    board_batten: "Board & Batten",
    modern_geometric: "Modern Geometric",
    slat_shiplap: "Slat Wall / Shiplap",
    herringbone: "Herringbone / Chevron",
    custom: "Custom Design"
};

/* --- ORIGINAL YOUR MAP --- */
const designMap = {
    board_batten: {
        variants: [
            {
                img: "variant_bb1.jpg",
                title: "Classic Vertical Rhythm",
                tip: "Clean vertical panels with a balanced, timeless look. A versatile option that works well in most interiors."
            },
            {
                img: "variant_bb2.jpg",
                title: "Upper Accent Panel",
                tip: "Traditional board & batten with an emphasized upper section, adding architectural structure and visual height."
            },
            {
                img: "variant_bb3.jpg",
                title: "Multi-Level Grid",
                tip: "A more detailed layout with multiple horizontal divisions, creating a bold, custom architectural statement."
            }
        ]
    },

    modern_geometric: {
        variants: [
            {
                img: "variant_mg1.jpg",
                title: "Diagonal Flow",
                tip: "Dynamic diagonal panels that create movement and a strong modern character."
            },
            {
                img: "variant_mg2.jpg",
                title: "Cross Geometry",
                tip: "Intersecting diagonal lines forming a bold architectural composition."
            },
            {
                img: "variant_mg3.jpg",
                title: "Vertical Pulse",
                tip: "Vertical elements with rhythmic depth for a clean modern accent."
            },
            {
                img: "variant_mg4.jpg",
                title: "Falling Lines",
                tip: "Asymmetric vertical drops adding motion and visual interest."
            },
            {
                img: "variant_mg5.jpg",
                title: "Woven Grid",
                tip: "Interlaced geometric pattern inspired by woven structures."
            },
            {
                img: "variant_mg6.jpg",
                title: "Diamond Matrix",
                tip: "Repeating diamond geometry creating a structured, architectural surface."
            },
            {
                img: "variant_mg7.jpg",
                title: "Classic Panels Remix",
                tip: "Traditional panel rhythm reimagined with modern geometric detailing."
            },
            {
                img: "variant_mg8.jpg",
                title: "Chevron Focus",
                tip: "Bold chevron-centered composition with strong symmetry and depth."
            }
        ]
    },

  slat_shiplap: {
    variants: [
        {
            img: "variant_slat1.jpg",
            title: "Vertical Slat Wall",
            tip: "Clean vertical slats that visually increase ceiling height and add a modern, rhythmic texture."
        },
        {
            img: "variant_slat2.jpg",
            title: "Horizontal Shiplap",
            tip: "Classic horizontal boards that visually widen the space and create a calm, timeless feel."
        },
        {
            img: "variant_slat3.jpg",
            title: "Angled Slat Accent",
            tip: "Diagonal slat layout for a bold, contemporary accent with strong visual movement."
        }
    ]
},
herringbone: {
    variants: [
        {
            img: "variant_hc1.jpg",
            title: "Herringbone Classic",
            tip: "Traditional herringbone layout with natural rhythm and timeless elegance."
        },
        {
            img: "variant_hc2.jpg",
            title: "Chevron Line Pattern",
            tip: "Clean chevron geometry with sharp angles for a modern, architectural look."
        },
        {
            img: "variant_hc3.jpg",
            title: "Chevron Statement",
            tip: "Bold chevron composition designed to become the focal point of the space."
        }
    ]
},

};



/* --- LOAD SELECTED DESIGN FROM URL --- */
const params = new URLSearchParams(window.location.search);
const design = params.get("design");
const titleEl = document.getElementById("designTitle");
const basePrice = parseFloat(params.get("base")) || 0;
const area = parseFloat(params.get("area")) || 0;


if (designTitles[design]) {
    titleEl.innerHTML = `
        <div class="design-title">${designTitles[design]}</div>
        <div class="design-subtitle">
            Choose a variant for your accent wall
        </div>
    `;
}


// === SHOW BASE PRICE IMMEDIATELY ===
let finalPrice = basePrice;

const priceEl = document.getElementById("bottomPrice");
priceEl.textContent = "$" + basePrice.toFixed(0);
priceEl.style.opacity = 1;

const zip = params.get("zip") || "";
const surcharge = parseFloat(params.get("surcharge") || "0");

const grid = document.getElementById("variantGrid");
const VARIANT_COEF = [
    1.00, // Diagonal Flow
    1.05, // Cross Geometry
    1.10, // Vertical Pulse
    1.15, // Falling Lines
    1.20, // Woven Grid
    1.25, // Diamond Matrix
    1.30, // Classic Panels Remix
    1.35  // Chevron Focus
];

let selectedIndex = null;
let selectedVariantTitle = "";

/* --- RENDER VARIANTS --- */
if (!designMap[design]) {
    console.error("Invalid design key:", design);
    alert("Design data is missing. Please go back and reselect the design.");
} else {
    designMap[design].variants.forEach((v, index) => {
        const tile = document.createElement("div");
        tile.className = "tile";

        const img = document.createElement("img");
        img.src = "/img/" + v.img;

        const title = document.createElement("div");
        title.className = "tile-title";
        title.textContent = v.title;

        const icon = document.createElement("div");
        icon.className = "tip-icon";
        icon.textContent = "?";
        icon.onclick = () => toggleTip(index);

        tile.appendChild(img);
        tile.appendChild(title);
        tile.appendChild(icon);

        tile.onclick = () => selectTile(index, tile);

        grid.appendChild(tile);
    });
}


/* --- SELECT TILE --- */

function selectTile(index, tile) {
    selectedIndex = index;
selectedVariantTitle = designMap[design].variants[index].title;
    document.querySelectorAll(".tile").forEach((t, i) => {
        t.classList.toggle("selected", i === index);
    });

    // Расчёт итоговой цены
   finalPrice = basePrice * VARIANT_COEF[index];
    document.getElementById("bottomPrice").textContent = "$" + finalPrice.toFixed(0);
    document.getElementById("bottomPrice").style.opacity = 1;

    document.getElementById("nextBtn").classList.remove("disabled");
}


/* --- TOOLTIPS --- */
function toggleTip(index) {
    const data = designMap[design].variants[index];

    const box = document.getElementById("tooltipBox");
    const text = document.getElementById("tooltipText");
    const backdrop = document.getElementById("tooltipBackdrop");

    text.textContent = data.tip;

    box.classList.add("show");
    backdrop.style.display = "block";

    // Закрытие по клику на фон
    backdrop.onclick = closeTip;

    // Клик внутри — не закрывает
    box.onclick = (e) => e.stopPropagation();
}

function closeTip() {
    const box = document.getElementById("tooltipBox");
    const backdrop = document.getElementById("tooltipBackdrop");

    box.classList.remove("show");

    setTimeout(() => {
        backdrop.style.display = "none";
    }, 250);
}



/* --- CONTINUE --- */
const SKIP_STEP_3 = ["slat_shiplap", "herringbone"];

function goNext() {
    if (selectedIndex === null) return;

    const w = params.get("width");
    const h = params.get("height");

    const baseUrl = SKIP_STEP_3.includes(design)
        ? "step4.html"
        : "step3.html";

    window.location.href =
        `${baseUrl}?design=${design}` +
        `&variant=${encodeURIComponent(selectedVariantTitle)}` +
        `&price=${finalPrice}` +
        `&area=${area}` +
        `&width=${w}` +
        `&height=${h}` +
        `&zip=${zip}` +
        `&surcharge=${surcharge}`;
}



</script>
 <!-- TOOLTIP ELEMENTS — ДОЛЖНЫ БЫТЬ ТУТ -->
    <div id="tooltipBackdrop" class="tooltip-backdrop"></div>

    <div id="tooltipBox" class="tooltip-bubble">
        <div id="tooltipText"></div>
    </div>
</body>
</html>
