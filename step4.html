<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" href="data:,">
<meta charset="UTF-8">

<style>
body {
    margin: 0;
    font-family: "Inter", sans-serif;
    background: #f7f7f7;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* ---------- TOP BAR ---------- */
.topbar {
    width: 100%;
    background: white;
    height: 90px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 40px;
    position: fixed;
    top: 0;
    z-index: 50;
}

.topbar-left { display: flex; align-items: center; gap: 14px; }
.topbar-left img { height: 55px; }

.topbar-center {
    flex: 1;
    text-align: center;
    font-size: 28px;
    font-weight: 800;
}

/* ---------- CONTENT ---------- */
.scroll-area {
    flex: 1;
    overflow-y: auto;
    padding: 130px 0 140px;
    display: flex;
    justify-content: center;
}

.content-card {
    width: 900px;
    background: white;
    padding: 40px 60px 80px;
    border-radius: 22px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    min-height: 700px;
}

.step-title {
    font-size: 26px;
    font-weight: 700;
    text-align: center;
    margin-bottom: 30px;
}

.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
}

.tile {
    border: 2px solid #ddd;
    border-radius: 16px;
    padding: 22px;
    background: #fafafa;
    cursor: pointer;
    text-align: center;
    position: relative;
    transition: 0.2s;
}

.tile:hover { border-color: #222; transform: translateY(-3px); }
.tile.selected { border-color: #4A5F3A; }
.tile.disabled {
    opacity: 0.35;
    pointer-events: none;
    filter: grayscale(100%);
}

.tile-title {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 8px;
}

.tip-icon {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #eee;
    border: 1px solid #ccc;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

/* ---------- BOTTOM ---------- */
.bottombar {
    width: 100%;
    height: 110px;
    background: white;
    box-shadow: 0 -2px 12px rgba(0,0,0,0.08);
    position: fixed;
    bottom: 0;
    padding: 10px 40px 0;
}

.bottom-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.bottom-row > .bottom-price {
    min-width: 140px;
    text-align: center;
}

.bottom-btn {
    padding: 12px 26px;
    background: #111;
    color: white;
    border-radius: 14px;
    font-size: 20px;
    cursor: pointer;
}
#nextBtn {
    margin-right: 120px;
}
.bottom-btn.disabled {
    opacity: 0.3;
    pointer-events: none;
}

.bottom-price {
    font-size: 26px;
    font-weight: 700;
}

/* ---------- TOOLTIP ---------- */
.tooltip-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.35);
    display: none;
    z-index: 9998;
}

.tooltip-box {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 420px;
    background: white;
    padding: 18px;
    border-radius: 16px;
    display: none;
    z-index: 9999;
}

.tooltip-box.show { display: block; }
.tooltip-box img { width: 100%; border-radius: 12px; }
</style>
</head>

<body>

<div class="topbar">
    <div class="topbar-left">
        <img src="img/LOGO.png">
    </div>
    <div class="topbar-center">FINISH OPTIONS</div>
</div>

<div class="scroll-area">
<div class="content-card">

<h2 class="step-title">How would you like your accent wall finished?</h2>

<div class="grid">

<div class="tile" onclick="selectFinish('one_color', this)">
    <div class="tile-title">Paint — One Color</div>
    <div class="tip-icon" onclick="event.stopPropagation(); showTip('one_color')">?</div>
</div>

<div class="tile" onclick="selectFinish('multi_color', this)">
    <div class="tile-title">Paint — Multiple Colors</div>
    <div class="tip-icon" onclick="event.stopPropagation(); showTip('multi_color')">?</div>
</div>

<div class="tile" onclick="selectFinish('partial_color', this)">
    <div class="tile-title">Paint — Partial Colors</div>
    <div class="tip-icon" onclick="event.stopPropagation(); showTip('partial_color')">?</div>
</div>

<div class="tile" onclick="selectFinish('solid_wood_paint', this)">
    <div class="tile-title">Solid Wood + Paint</div>
    <div class="tip-icon" onclick="event.stopPropagation(); showTip('solid_wood_paint')">?</div>
</div>

<div class="tile" id="tileSolidNoPaint" onclick="selectFinish('solid_wood_no_paint', this)">
    <div class="tile-title">Solid Wood (No Paint)</div>
    <div class="tip-icon" onclick="event.stopPropagation(); showTip('solid_wood_no_paint')">?</div>
</div>

</div>
</div>
</div>

<div class="bottombar">
<div class="bottom-row">
    <div class="bottom-btn" onclick="goBack()">Back</div>
    <div class="bottom-price" id="priceBox">$0</div>
    <div class="bottom-btn disabled" id="nextBtn">Continue</div>
</div>
</div>

<div id="tooltipBackdrop" class="tooltip-backdrop"></div>
<div id="tooltipBox" class="tooltip-box">
    <img id="tooltipImage">
</div>


<script src="pricing-config.js"></script>
<script>
const area = parseFloat(localStorage.getItem("wallArea"));
let currentPrice = parseFloat(localStorage.getItem("currentPrice"));
const priceBox = document.getElementById("priceBox");
priceBox.textContent = "$" + currentPrice.toFixed(0);

let selectedFinish = null;

const FINISH_RESTRICTIONS = {
    solid_wood_no_paint: ["board_batten", "modern_geometric"]
};

const selectedDesign = localStorage.getItem("selectedDesign");
if (FINISH_RESTRICTIONS.solid_wood_no_paint.includes(selectedDesign)) {
    document.getElementById("tileSolidNoPaint").classList.add("disabled");
}

const TIP_IMAGES = {
    one_color: "img/finish_onecolor.jpg",
    multi_color: "img/finish_multicolor.jpg",
    partial_color: "img/finish_partial.jpg",
    solid_wood_paint: "img/finish_solid_paint.jpg",
    solid_wood_no_paint: "img/finish_solid_no.jpg"
};

const TIP_TEXTS = {
    one_color: "Single solid paint color applied evenly across the entire accent wall.",
    multi_color: "Two or more paint colors used to highlight different elements of the design.",
    partial_color: "Selective painting of specific sections while keeping other areas neutral.",
    solid_wood_paint: "Solid wood elements installed and fully painted for a seamless look.",
    solid_wood_no_paint: "Natural solid wood finish with visible grain, no paint applied."
};

function showTip(key) {
    const img = document.getElementById("tooltipImage");

    img.src = TIP_IMAGES[key];
    img.style.display = "block";

    document.getElementById("tooltipBackdrop").style.display = "block";
    document.getElementById("tooltipBox").classList.add("show");
}





document.getElementById("tooltipBackdrop").onclick = () => {
    document.getElementById("tooltipBackdrop").style.display = "none";
    document.getElementById("tooltipBox").classList.remove("show");
};

function selectFinish(key, tile) {
    if (tile.classList.contains("disabled")) return;

    selectedFinish = key;
    document.querySelectorAll(".tile").forEach(t => t.classList.remove("selected"));
    tile.classList.add("selected");

    const rate = FINISH_RATE[key] || 0;
    const newPrice = addAreaCost(currentPrice, area, rate);
    priceBox.textContent = "$" + newPrice.toFixed(0);

    localStorage.setItem("currentPrice", newPrice.toFixed(2));
    localStorage.setItem("selectedFinish", key);
    document.getElementById("nextBtn").classList.remove("disabled");
document.getElementById("nextBtn").onclick = goNext;

}

function goBack() { window.location.href = "step3.html"; }
function goNext() { if (selectedFinish) window.location.href = "step4_1.html"; }
</script>

</body>
</html>
